<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Manager</title>
    <!-- Add React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@react-spring/web@9.5.5/dist/web.umd.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
    --primary-color: #FFF8F0;
    --accent-color: #D46A6A;
    --text-color: #1f2937;
    --shadow-color: rgba(0, 0, 0, 0.1);
    
    /* Portfolio variables */
    --first-hue: 250;
    --sat: 66%;
    --lig: 75%;
    --second-hue: 219;
    --first-color: hsl(var(--first-hue), var(--sat), var(--lig));
    --first-color-alt: hsl(var(--first-hue), var(--sat), 71%);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background-color: var(--primary-color);
    color: var(--text-color);
    min-height: 100vh;
    padding: 2rem;
    transition: background-color 0.4s ease, color 0.4s ease;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
}

h1 {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--text-color);
    font-size: 2.5rem;
}

.loading-spinner {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-left-color: var(--accent-color);
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
}

.loading-spinner p {
    font-weight: 500;
    color: var(--text-color);
}

.cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 2rem;
    position: relative; 
    min-height: 200px; 
}

/* Enhanced card styling with portfolio animations */
.card-preview {
    background: linear-gradient(
        180deg,
        hsla(var(--first-hue), var(--sat), var(--lig), 0.5),
        hsla(var(--first-hue), var(--sat), var(--lig), 0.1)
    );
    border-radius: 50%;
    height: 200px;
    width: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 6px var(--shadow-color);
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    background-size: 200% 200%;
    perspective: 1000px;
    transition: box-shadow 0.5s ease;
}

.card-preview:hover {
    transform: translateY(-8px) scale(1.05) rotateY(5deg);
    box-shadow: 0 15px 30px rgba(var(--first-hue), var(--sat), var(--lig), 0.15),
                0 0 15px rgba(212, 106, 106, 0.5);
}

/* Reveal animation from portfolio */
.reveal-animation {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.reveal-animation.active {
    opacity: 1;
    transform: translateY(0);
}

/* Ripple Effect on Hover */
.card-preview::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    border-radius: 50%;
    opacity: 0;
    background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
    transform: scale(0.7);
    transition: opacity 0.3s, transform 0.3s;
    pointer-events: none;
}

.card-preview:hover::after {
    opacity: 1;
    transform: scale(1.2);
    animation: rippleEffect 1.5s infinite;
}

/* Content Raise Effect */
.card-preview .card-icon-container,
.card-preview h3,
.card-preview p {
    transition: transform 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.card-preview:hover .card-icon-container {
    transform: translateY(-7px) scale(1.05);
}

.card-preview:hover h3 {
    transform: translateY(-3px);
}

.card-preview:hover p {
    transform: translateY(-1px);
}

/* New Animation Keyframes */
@keyframes pulse {
    0% {
        transform: translateY(-5px) scale(1.05) rotateY(5deg);
    }
    100% {
        transform: translateY(-7px) scale(1.08) rotateY(8deg);
    }
}

@keyframes rippleEffect {
    0% {
        transform: scale(1);
        opacity: 0.4;
    }
    100% {
        transform: scale(1.4);
        opacity: 0;
    }
}

.card-preview h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    text-align: center;
    padding: 0 1rem;
}

.card-preview p {
    color: white;
    font-size: 0.9rem;
    font-weight: 500;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.add-btn-container {
    display: flex;
    justify-content: center;
    margin: 2rem 0;
    animation: fadeIn 1s 0.5s forwards;
}

.add-card-btn {
    background-color: #1f2937;
    color: white;
    border: none;
    border-radius: 50px;
    padding: 1rem 2rem;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 4px 6px var(--shadow-color);
    display: flex;
    align-items: center;
    gap: 10px;
    overflow: hidden;
    position: relative;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), 
              background-color 0.3s ease,
              box-shadow 0.3s ease;
}

.add-card-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 15px var(--shadow-color);
    background-color: #111827;
}

.add-card-btn svg {
    stroke: white;
}

.add-card-btn .shiny-text {
    display: inline-block;
    background: linear-gradient(
        120deg,
        rgba(255, 255, 255, 0.8) 40%,
        rgba(255, 255, 255, 1) 50%,
        rgba(255, 255, 255, 0.8) 60%
    );
    background-size: 200% 100%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 5s linear infinite;
    color: white; 
    font-weight: 500;
}

@keyframes shine {
    0% {
        background-position: 100% 0;
    }
    100% {
        background-position: -100% 0;
    }
}

.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal.active {
    opacity: 1;
    visibility: visible;
}

.modal-content {
    background-color: white;
    border-radius: 20px;
    padding: 2rem;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    transform: translateY(20px);
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
}

.modal.active .modal-content {
    transform: translateY(0);
}

.modal h2 {
    margin-bottom: 1.5rem;
    text-align: center;
}

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-group input {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    font-size: 1rem;
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 1.5rem;
}

.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.btn-secondary {
    background-color: #e5e7eb;
    color: var(--text-color);
}

.btn-primary {
    background-color: var(--accent-color);
    color: white;
}

.btn-primary:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
}

.btn:hover {
    opacity: 0.9;
}

.card-details {
    background-color: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 25px var(--shadow-color);
    animation: fadeIn 0.5s ease;
    max-width: 500px;
    margin: 0 auto;
}

.card-details h2 {
    margin-bottom: 1.5rem;
    text-align: center;
}

.card-info {
    margin-bottom: 1.5rem;
}

.card-info p {
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
}

.card-info p span:first-child {
    font-weight: 500;
}

.delete-btn {
    background-color: #fee2e2;
    color: #b91c1c;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s ease;
    margin-top: 1rem;
}

.delete-btn:hover {
    background-color: #fecaca;
    transform: translateY(-2px);
}

.back-btn {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 1rem;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    color: var(--text-color);
    padding: 0.5rem;
    transition: transform 0.3s ease;
}

.back-btn:hover {
    transform: translateX(-5px);
}

.hidden {
    display: none;
}

.empty-state {
    text-align: center;
    padding: 3rem 0;
    color: #6b7280;
    animation: fadeIn 0.8s ease;
}

.empty-state svg {
    width: 100px;
    height: 100px;
    margin-bottom: 1rem;
    color: #d1d5db;
    animation: pulse 2s infinite alternate ease-in-out;
}

.empty-state h3 {
    margin-bottom: 1rem;
    font-size: 1.5rem;
}

.card-type-badge {
    display: none;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes cardPulse {
    0% {
        background-position: 0% 0%;
    }
    100% {
        background-position: 100% 100%;
    }
}

.notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #d1fae5;
    color: #065f46;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    gap: 10px;
    transform: translateY(100px);
    opacity: 0;
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    z-index: 2000;
}

.notification.show {
    transform: translateY(0);
    opacity: 1;
}

.error-notification {
    background-color: #fee2e2;
    color: #b91c1c;
}

.card-logo {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    color: #6b7280;
}

/* Updated Card color schemes with Animista-style animations */
.color-change-2x {
    -webkit-animation: color-change-2x 10s linear infinite alternate both;
    animation: color-change-2x 10s linear infinite alternate both;
}

.card-visa {
    background: linear-gradient(135deg, #1c2e94, #3a4ebd);
    color: white;
    animation: color-change-visa 10s linear infinite alternate both;
}

.card-mastercard {
    background: linear-gradient(135deg, #ff8a00, #ffbd45);
    color: white;
    animation: color-change-mastercard 10s linear infinite alternate both;
}

.card-amex {
    background: linear-gradient(135deg, #0071ce, #3d9bff);
    color: white;
    animation: color-change-amex 10s linear infinite alternate both;
}

.card-discover {
    background: linear-gradient(135deg, #ff6d00, #ffad75);
    color: white;
    animation: color-change-discover 10s linear infinite alternate both;
}

.card-generic {
    background: linear-gradient(135deg, #D46A6A, #FFF8F0);
    color: #1f2937;
    animation: color-change-generic 10s linear infinite alternate both;
}

/* Animista-style animations with smoother transitions */
@-webkit-keyframes color-change-2x {
    0% {
        background: #19dcea;
        transform: scale(1);
    }
    50% {
        background: #7986cb;
        transform: scale(1.05);
    }
    100% {
        background: #b22cff;
        transform: scale(1);
    }
}

@keyframes color-change-2x {
    0% {
        background: #19dcea;
        transform: scale(1);
    }
    50% {
        background: #7986cb;
        transform: scale(1.05);
    }
    100% {
        background: #b22cff;
        transform: scale(1);
    }
}

/* Card-specific color animations */
@keyframes color-change-visa {
    0% {
        background: linear-gradient(135deg, #1c2e94, #3a4ebd);
        transform: scale(1);
    }
    50% {
        background: linear-gradient(135deg, #2a3ca2, #4a5ecb);
        transform: scale(1.05);
    }
    100% {
        background: linear-gradient(135deg, #3848b0, #5a6ed9);
        transform: scale(1);
    }
}

@keyframes color-change-mastercard {
    0% {
        background: linear-gradient(135deg, #ff8a00, #ffbd45);
        transform: scale(1);
    }
    50% {
        background: linear-gradient(135deg, #ff9a20, #ffcd65);
        transform: scale(1.05);
    }
    100% {
        background: linear-gradient(135deg, #ffaa40, #ffdd85);
        transform: scale(1);
    }
}

@keyframes color-change-amex {
    0% {
        background: linear-gradient(135deg, #0071ce, #3d9bff);
        transform: scale(1);
    }
    50% {
        background: linear-gradient(135deg, #1081de, #4dabff);
        transform: scale(1.05);
    }
    100% {
        background: linear-gradient(135deg, #2091ee, #5dbbff);
        transform: scale(1);
    }
}

@keyframes color-change-discover {
    0% {
        background: linear-gradient(135deg, #ff6d00, #ffad75);
        transform: scale(1);
    }
    50% {
        background: linear-gradient(135deg, #ff7d10, #ffbd85);
        transform: scale(1.05);
    }
    100% {
        background: linear-gradient(135deg, #ff8d20, #ffcd95);
        transform: scale(1);
    }
}

@keyframes color-change-generic {
    0% {
        background: linear-gradient(135deg, #D46A6A, #FFF8F0);
        transform: scale(1);
    }
    50% {
        background: linear-gradient(135deg, #E47A7A, #FFF8F8);
        transform: scale(1.05);
    }
    100% {
        background: linear-gradient(135deg, #F48A8A, #FFFAFA);
        transform: scale(1);
    }
}

.card-generic p {
    color: #1f2937;
    text-shadow: none;
}

.card-generic h3 {
    color: #1f2937;
}

.card-icon-container {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.2);
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 0.5rem;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Auth Form Styles */
.auth-container {
    max-width: 500px;
    margin: 0 auto;
    padding: 2rem;
    background-color: white;
    border-radius: 20px;
    box-shadow: 0 4px 6px var(--shadow-color);
    animation: fadeIn 0.5s ease;
    transition: transform 0.5s ease, box-shadow 0.3s ease;
}

.auth-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.auth-container h2 {
    text-align: center;
    margin-bottom: 2rem;
}

.auth-tabs {
    display: flex;
    margin-bottom: 2rem;
    border-bottom: 1px solid #e5e7eb;
}

.auth-tab {
    flex: 1;
    padding: 1rem;
    text-align: center;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
    font-weight: 500;
}

.auth-tab.active {
    border-bottom: 2px solid var(--accent-color);
    color: var(--accent-color);
}

.auth-form {
    margin-bottom: 1rem;
}

.auth-switch {
    text-align: center;
    margin-top: 1rem;
    font-size: 0.9rem;
}

.auth-switch a {
    color: var(--accent-color);
    text-decoration: none;
    cursor: pointer;
}

.user-menu {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 2rem;
    align-items: center;
    gap: 1rem;
    animation: fadeIn 0.5s ease;
}

.user-email {
    font-weight: 500;
}

.logout-btn {
    background-color: #e5e7eb;
    color: var(--text-color);
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.logout-btn:hover {
    background-color: #d1d5db;
    transform: translateY(-2px);
}

/* Loading spinner */
.loader {
    border: 3px solid #f3f3f3;
    border-top: 3px solid var(--accent-color);
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
    display: inline-block;
    margin-right: 10px;
    vertical-align: middle;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-btn {
    opacity: 0.7;
    pointer-events: none;
}

.loading-btn .loader {
    display: inline-block;
}

.btn .loader {
    display: none;
}

/* Enhanced Styles for SplitText */
.split-text {
    display: inline-block;
}

/* Letter animation for title */
.letter {
    display: inline-block;
    opacity: 0;
    transform: translateY(40px) rotate(10deg);
    filter: blur(5px);
    animation: letterReveal 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes letterReveal {
    0% {
        opacity: 0;
        transform: translateY(40px) rotate(10deg);
        filter: blur(5px);
    }
    100% {
        opacity: 1;
        transform: translateY(0) rotate(0);
        filter: blur(0);
    }
}

/* Enhanced Styles for ShinyText */
.shiny-text {
    display: inline-block;
    background: linear-gradient(
        120deg,
        rgba(255, 255, 255, 0) 40%,
        rgba(255, 255, 255, 0.8) 50%,
        rgba(255, 255, 255, 0) 60%
    );
    background-size: 200% 100%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 5s linear infinite;
}

/* Copy button styles */
.copy-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    margin-left: 10px;
    color: var(--accent-color);
    transition: transform 0.2s ease, opacity 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.copy-btn:hover {
    transform: scale(1.1);
}

.copy-btn.copied {
    color: #22c55e;
}

.copy-btn svg {
    width: 18px;
    height: 18px;
}

.card-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding: 0.5rem 0;
}

.card-info-content {
    display: flex;
    align-items: center;
}

.copy-feedback {
    position: fixed;
    bottom: 100px;
    right: 20px;
    background: #22c55e;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-size: 0.9rem;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 1001;
}

.copy-feedback.show {
    opacity: 1;
    transform: translateY(0);
}

/* Mobile spacing fixes */
@media (max-width: 768px) {
    body {
        padding: 1rem;
    }

    .card-details {
        padding: 1.5rem;
    }

    .card-info-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e5e7eb;
    }

    .card-info-row:last-child {
        border-bottom: none;
    }

    .card-info-content {
        width: 100%;
        justify-content: space-between;
    }

    .card-info {
        margin-bottom: 2rem;
    }

    h1 {
        font-size: 2rem;
    }

    .modal-content {
        padding: 1.5rem;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <h1 id="app-title">Card Manager</h1>

        <!-- Authentication View -->
        <div id="auth-view">
            <div class="auth-container">
                <h2>Welcome to Card Manager</h2>
                <div class="auth-tabs">
                    <div id="login-tab" class="auth-tab active">Login</div>
                    <div id="signup-tab" class="auth-tab">Sign Up</div>
                </div>
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-username">Username</label>
                        <input type="text" id="login-username" placeholder="Your username" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Your password" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <span class="loader"></span>
                        Login
                    </button>
                </form>
                <form id="signup-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="signup-username">Username</label>
                        <input type="text" id="signup-username" placeholder="Choose a username" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" placeholder="Your password (min 6 characters)" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="signup-confirm-password">Confirm Password</label>
                        <input type="password" id="signup-confirm-password" placeholder="Confirm your password" required minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <span class="loader"></span>
                        Sign Up
                    </button>
                </form>
            </div>
        </div>

        <!-- Main App View -->
        <div id="app-view" class="hidden">
            <!-- User Menu -->
            <div class="user-menu">
                <span class="user-email"><strong>User:</strong> <span id="user-email">username</span></span>
                <button id="logout-btn" class="logout-btn">Logout</button>
            </div>

            <!-- Home view with list of cards -->
            <div id="home-view">
                <div id="cards-container" class="cards-container">
                    <div id="loading-spinner" class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Loading your cards...</p>
                    </div>
                    <!-- Cards will be added here dynamically -->
                </div>

                <div class="add-btn-container">
                    <button id="add-card-btn" class="add-card-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        <span id="add-btn-text">Add Card</span>
                    </button>
                </div>
            </div>

            <!-- Card details view -->
            <div id="card-details-view" class="hidden">
                <button id="back-btn" class="back-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to Cards
                </button>

                <div class="card-details">
                    <h2 id="card-detail-nickname">Card Nickname</h2>
                    <div class="card-info">
                        <div class="card-info-row">
                            <span>Card Number:</span>
                            <div class="card-info-content">
                                <span id="card-detail-number">1234 1234 1234 1234</span>
                                <button class="copy-btn" data-copy-target="card-detail-number" title="Copy card number">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="card-info-row">
                            <span>Expiration Date:</span>
                            <div class="card-info-content">
                                <span id="card-detail-expiry">MM/YY</span>
                                <button class="copy-btn" data-copy-target="card-detail-expiry" title="Copy expiration date">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="card-info-row">
                            <span>3 Numbers On Da Back:</span>
                            <div class="card-info-content">
                                <span id="card-detail-three">123</span>
                                <button class="copy-btn" data-copy-target="card-detail-three" title="Copy CVV">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="card-info-row">
                            <span>Card Type:</span>
                            <span id="card-detail-type">Visa</span>
                        </div>
                    </div>
                    <button id="edit-card-btn" class="btn btn-primary" style="margin-right: 10px;">Edit</button>
                    <button id="delete-card-btn" class="delete-btn">Delete Card</button>
                </div>
            </div>

            <!-- Add card modal -->
            <div id="add-card-modal" class="modal">
                <div class="modal-content">
                    <h2>Add New Card</h2>
                    <form id="add-card-form">
                        <div class="form-group">
                            <label for="card-nickname">Card Nickname</label>
                            <input type="text" id="card-nickname" placeholder="E.g., Work Visa" required>
                        </div>
                        <div class="form-group">
                            <label for="card-number">Card Number</label>
                            <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19" required>
                        </div>
                        <div class="form-group">
                            <label for="card-expiry">Expiration Date</label>
                            <input type="text" id="card-expiry" placeholder="MM/YY" maxlength="5" required>
                        </div>
                        <div class="form-group">
                            <label for="card-cvv">3 Numbers On Da Back</label>
                            <input type="text" id="card-cvv" placeholder="123" required>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="cancel-add-card" class="btn btn-secondary">Cancel</button>
                            <button type="submit" class="btn btn-primary">
                                <span class="loader"></span>
                                Save Card
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="notification">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span id="notification-message">Card added successfully!</span>
        </div>

        <!-- Copy feedback -->
        <div id="copy-feedback" class="copy-feedback">
            Copied to clipboard!
        </div>
    </div>

    <!-- Import Firebase -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js';
        import { getFirestore, collection, addDoc, getDocs, doc, getDoc, deleteDoc, updateDoc, query, where } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js';

        // Your web app's Firebase configuration
        // These are your actual Firebase configuration details from your project
        const firebaseConfig = {
            apiKey: "AIzaSyBB1pzTv6APvqwrR_RCtlr6yNdIbvnZSXA",
            authDomain: "card-manager-a0fae.firebaseapp.com",
            projectId: "card-manager-a0fae",
            storageBucket: "card-manager-a0fae.appspot.com",
            messagingSenderId: "54289334274",
            appId: "1:54289334274:web:fe4bf1e251fcf85891271b"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // The domain to append to usernames to create email format
        const DOMAIN = "cardmanager.com";

        // Function to convert username to email format
        function usernameToEmail(username) {
            return `${username}@${DOMAIN}`;
        }

        // Function to extract username from email 
        function emailToUsername(email) {
            return email.split('@')[0];
        }

        // DOM Elements
        const authView = document.getElementById('auth-view');
        const appView = document.getElementById('app-view');
        const homeView = document.getElementById('home-view');
        const cardDetailsView = document.getElementById('card-details-view');
        const cardsContainer = document.getElementById('cards-container');
        const addCardBtn = document.getElementById('add-card-btn');
        const addCardModal = document.getElementById('add-card-modal');
        const addCardForm = document.getElementById('add-card-form');
        const cancelAddCardBtn = document.getElementById('cancel-add-card');
        const backBtn = document.getElementById('back-btn');
        const deleteCardBtn = document.getElementById('delete-card-btn');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notification-message');
        
        // Auth Elements
        const loginTab = document.getElementById('login-tab');
        const signupTab = document.getElementById('signup-tab');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const userEmailDisplay = document.querySelector('#user-email');
        const logoutBtn = document.getElementById('logout-btn');
        
        // Card detail elements
        const cardDetailNickname = document.getElementById('card-detail-nickname');
        const cardDetailNumber = document.getElementById('card-detail-number');
        const cardDetailExpiry = document.getElementById('card-detail-expiry');
        const cardDetailHolder = document.getElementById('card-detail-three');
        const cardDetailType = document.getElementById('card-detail-type');
        
        // Form inputs
        const cardNicknameInput = document.getElementById('card-nickname');
        const cardNumberInput = document.getElementById('card-number');
        const cardExpiryInput = document.getElementById('card-expiry');
        const cardHolderInput = document.getElementById('card-cvv');
        
        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in
                authView.classList.add('hidden');
                appView.classList.remove('hidden');
                // Display username instead of email
                userEmailDisplay.textContent = emailToUsername(user.email);
                loadCards();
            } else {
                // User is signed out
                appView.classList.add('hidden');
                authView.classList.remove('hidden');
                // Clear forms
                loginForm.reset();
                signupForm.reset();
            }
        });
        
        // Auth event listeners
        loginTab.addEventListener('click', () => {
            loginTab.classList.add('active');
            signupTab.classList.remove('active');
            loginForm.classList.remove('hidden');
            signupForm.classList.add('hidden');
        });
        
        signupTab.addEventListener('click', () => {
            signupTab.classList.add('active');
            loginTab.classList.remove('active');
            signupForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
        });
        
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            const submitBtn = loginForm.querySelector('button[type="submit"]');
            
            // Convert username to email format for Firebase
            const email = usernameToEmail(username);
            
            try {
                submitBtn.classList.add('loading-btn');
                await signInWithEmailAndPassword(auth, email, password);
                // Successful login handled by onAuthStateChanged
            } catch (error) {
                showNotification(`Login failed: ${error.message}`, true);
            } finally {
                submitBtn.classList.remove('loading-btn');
            }
        });
        
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('signup-username').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            const submitBtn = signupForm.querySelector('button[type="submit"]');
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', true);
                return;
            }
            
            // Convert username to email format for Firebase
            const email = usernameToEmail(username);
            
            try {
                submitBtn.classList.add('loading-btn');
                await createUserWithEmailAndPassword(auth, email, password);
                // Successful signup handled by onAuthStateChanged
            } catch (error) {
                showNotification(`Signup failed: ${error.message}`, true);
            } finally {
                submitBtn.classList.remove('loading-btn');
            }
        });
        
        logoutBtn.addEventListener('click', async () => {
            try {
                await signOut(auth);
                // Successful logout handled by onAuthStateChanged
            } catch (error) {
                showNotification(`Logout failed: ${error.message}`, true);
            }
        });
        
        // App initialization
        function init() {
            // Event listeners
            addCardBtn.addEventListener('click', openAddCardModal);
            cancelAddCardBtn.addEventListener('click', closeAddCardModal);
            addCardForm.addEventListener('submit', handleAddCard);
            backBtn.addEventListener('click', showHomeView);
            deleteCardBtn.addEventListener('click', handleDeleteCard);
            
            // Format card number input with spaces
            cardNumberInput.addEventListener('input', formatCardNumber);
            
            // Format expiry date input with slash
            cardExpiryInput.addEventListener('input', formatExpiryDate);
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === addCardModal) {
                    closeAddCardModal();
                }
            });

            // Initialize enhanced animations
            initEnhancedAnimations();
            
            // Initialize copy buttons
            initCopyButtons();

            // Edit card functionality
            document.getElementById('edit-card-btn').addEventListener('click', () => {
                document.getElementById('card-nickname').value = cardDetailNickname.textContent;
                document.getElementById('card-number').value = cardDetailNumber.textContent.replace(/\s/g, '');
                document.getElementById('card-expiry').value = cardDetailExpiry.textContent;
                document.getElementById('card-cvv').value = cardDetailHolder.textContent;
                addCardForm.dataset.editingId = deleteCardBtn.dataset.cardId;
                addCardModal.classList.add('active');
            });
        }
        
        // Initialize copy buttons functionality
        function initCopyButtons() {
            // Event delegation for copy buttons
            document.addEventListener('click', async (e) => {
                const copyBtn = e.target.closest('.copy-btn');
                if (copyBtn) {
                    e.preventDefault();
                    
                    const targetId = copyBtn.dataset.copyTarget;
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        let textToCopy = targetElement.textContent.trim();
                        
                        // If copying card number, remove spaces
                        if (targetId === 'card-detail-number') {
                            textToCopy = textToCopy.replace(/\s/g, '');
                        }
                        
                        try {
                            await navigator.clipboard.writeText(textToCopy);
                            
                            // Visual feedback
                            copyBtn.classList.add('copied');
                            
                            // Change icon temporarily to checkmark
                            const originalIcon = copyBtn.innerHTML;
                            copyBtn.innerHTML = `
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                            `;
                            
                            // Show feedback toast
                            showCopyFeedback();
                            
                            // Reset after 2 seconds
                            setTimeout(() => {
                                copyBtn.classList.remove('copied');
                                copyBtn.innerHTML = originalIcon;
                            }, 2000);
                            
                        } catch (err) {
                            // Fallback for browsers that don't support clipboard API
                            fallbackCopyTextToClipboard(textToCopy);
                        }
                    }
                }
            });
        }

        // Fallback function for older browsers
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            
            // Avoid scrolling to bottom
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopyFeedback();
                }
            } catch (err) {
                console.error('Fallback: Could not copy text: ', err);
            }

            document.body.removeChild(textArea);
        }

        // Show copy feedback
        function showCopyFeedback() {
            const feedback = document.getElementById('copy-feedback');
            feedback.classList.add('show');
            
            setTimeout(() => {
                feedback.classList.remove('show');
            }, 1500);
        }
        
        // Initialize the app
        init();
        
        // Load cards for current user from Firestore
        async function loadCards() {
            const user = auth.currentUser;
            if (!user) return;
            
            try {
                const q = query(collection(db, "cards"), where("userId", "==", user.uid));
                const querySnapshot = await getDocs(q);
                
                // Clear existing cards
                cardsContainer.innerHTML = '';
                
                // Check if there are no cards
                if (querySnapshot.empty) {
                    renderEmptyState();
                    return;
                }
                
                // Create card previews
                let delay = 0.1;
                querySnapshot.forEach((doc) => {
                    const card = doc.data();
                    const cardElement = createCardPreview(doc.id, card);
                    cardElement.style.animationDelay = `${delay}s`;
                    cardsContainer.appendChild(cardElement);
                    delay += 0.15;
                });

                // Animate cards with staggered entrance
                animateCardsStaggered();
            } catch (error) {
                showNotification(`Error loading cards: ${error.message}`, true);
            }
        }
        
        function renderEmptyState() {
            const emptyState = document.createElement('div');
            emptyState.className = 'empty-state';
            emptyState.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                </svg>
                <h3>No Cards Yet</h3>
                <p>Add your first card to get started</p>
            `;
            cardsContainer.appendChild(emptyState);
        }
        
        function createCardPreview(cardId, card) {
            const cardElement = document.createElement('div');
            cardElement.className = 'card-preview reveal-animation';
            cardElement.dataset.cardId = cardId;
            
            // Get card type and set appropriate class
            const cardType = detectCardType(card.number);
            const cardClass = getCardClass(cardType);
            cardElement.classList.add(cardClass);
            
            // Card icon
            const cardIcon = getCardIcon(cardType);
            
            // Display full card number - no masking
            cardElement.innerHTML = `
                <div class="card-type-badge">${cardType}</div>
                <div class="card-icon-container">
                    ${cardIcon}
                </div>
                <h3>${card.nickname}</h3>
                <p>${formatCardNumber(card.number)}</p>
            `;
            
            cardElement.addEventListener('click', () => {
                showCardDetails(cardId);
            });
            
            return cardElement;
        }
        
        function openAddCardModal() {
            addCardModal.classList.add('active');
            cardNicknameInput.focus();

            // Enhanced animation for modal content
            const modalContent = addCardModal.querySelector('.modal-content');
            modalContent.style.transform = 'scale(0.9) translateY(20px)';
            modalContent.style.opacity = '0';
            
            setTimeout(() => {
                modalContent.style.transform = 'scale(1) translateY(0)';
                modalContent.style.opacity = '1';
            }, 10);
        }
        
        function closeAddCardModal() {
            addCardModal.classList.remove('active');
            addCardForm.reset();
        }
        
        async function handleAddCard(e) {
            e.preventDefault();
            
            const user = auth.currentUser;
            if (!user) return;
            
            const submitBtn = addCardForm.querySelector('button[type="submit"]');
            submitBtn.classList.add('loading-btn');
            
            const newCard = {
                nickname: cardNicknameInput.value,
                number: cardNumberInput.value,
                expiry: cardExpiryInput.value,
                holder: cardHolderInput.value,
                userId: user.uid, // Important: associate card with user
                createdAt: new Date().toISOString()
            };
            
            try {
                const editingId = addCardForm.dataset.editingId;
                if (editingId) {
                    // Update existing card
                    await updateDoc(doc(db, "cards", editingId), newCard);
                    delete addCardForm.dataset.editingId;
                    showEnhancedNotification('Card updated successfully!');
                    showHomeView();
                } else {
                    // Add new card to Firestore
                    await addDoc(collection(db, "cards"), newCard);
                    showEnhancedNotification('Card added successfully!');
                }
                
                // Close modal
                closeAddCardModal();
                
                // Reload cards
                loadCards();
            } catch (error) {
                showEnhancedNotification(`Error ${addCardForm.dataset.editingId ? 'updating' : 'adding'} card: ${error.message}`, true);
            } finally {
                submitBtn.classList.remove('loading-btn');
            }
        }
        
        async function showCardDetails(cardId) {
            const user = auth.currentUser;
            if (!user) return;
            
            try {
                // Get card document from Firestore
                const cardDoc = await getDoc(doc(db, "cards", cardId));
                
                if (cardDoc.exists()) {
                    const card = cardDoc.data();
                    
                    // Verify card belongs to current user
                    if (card.userId !== user.uid) {
                        showEnhancedNotification('You do not have permission to view this card', true);
                        return;
                    }
                    
                    // Populate card details - show full numbers without masking
                    cardDetailNickname.textContent = card.nickname;
                    cardDetailNumber.textContent = formatCardNumber(card.number);
                    cardDetailExpiry.textContent = card.expiry;
                    cardDetailHolder.textContent = card.holder;
                    cardDetailType.textContent = detectCardType(card.number);
                    
                    // Set delete button data
                    deleteCardBtn.dataset.cardId = cardId;
                    
                    // Show card details view with animation
                    homeView.classList.add('hidden');
                    cardDetailsView.classList.remove('hidden');
                    
                    // Add reveal animation to card details
                    const cardDetails = document.querySelector('.card-details');
                    cardDetails.classList.add('reveal-animation');
                    setTimeout(() => {
                        cardDetails.classList.add('active');
                    }, 10);
                } else {
                    showEnhancedNotification('Card not found', true);
                }
            } catch (error) {
                showEnhancedNotification(`Error loading card details: ${error.message}`, true);
            }
        }
        
        function showHomeView() {
            cardDetailsView.classList.add('hidden');
            homeView.classList.remove('hidden');
        }
        
        async function handleDeleteCard() {
            const user = auth.currentUser;
            if (!user) return;
            
            const cardId = deleteCardBtn.dataset.cardId;
            if (!cardId) return;
            
            try {
                // Get card document to verify ownership
                const cardDoc = await getDoc(doc(db, "cards", cardId));
                
                if (cardDoc.exists()) {
                    const card = cardDoc.data();
                    
                    // Verify card belongs to current user
                    if (card.userId !== user.uid) {
                        showEnhancedNotification('You do not have permission to delete this card', true);
                        return;
                    }
                    
                    // Delete card from Firestore
                    await deleteDoc(doc(db, "cards", cardId));
                    
                    // Show notification
                    showEnhancedNotification('Card deleted successfully!');
                    
                    // Go back to home view
                    showHomeView();
                    
                    // Reload cards
                    loadCards();
                } else {
                    showEnhancedNotification('Card not found', true);
                }
            } catch (error) {
                showEnhancedNotification(`Error deleting card: ${error.message}`, true);
            }
        }
        
        function formatCardNumber(e) {
            let value;
            if (typeof e === 'string') {
                // When formatting an existing card number
                value = e.replace(/\s/g, '');
            } else {
                // When formatting input
                value = e.target.value.replace(/\D/g, '');
                e.target.value = formatCardNumber(value);
                return;
            }
            
            // Add spaces after every 4 digits
            let formattedValue = '';
            for (let i = 0; i < value.length; i++) {
                if (i > 0 && i % 4 === 0) {
                    formattedValue += ' ';
                }
                formattedValue += value[i];
            }
            
            return formattedValue;
        }
        
        function formatExpiryDate(e) {
            let value = e.target.value.replace(/\D/g, '');
            let formattedValue = '';
            
            if (value.length > 0) {
                formattedValue = value.substring(0, 2);
                if (value.length > 2) {
                    formattedValue += '/' + value.substring(2, 4);
                }
            }
            
            e.target.value = formattedValue;
        }
        
        function detectCardType(number) {
            const cleaned = number.replace(/\s/g, '');
            const firstDigit = cleaned.charAt(0);
            const firstTwoDigits = parseInt(cleaned.substring(0, 2));
            
            if (firstDigit === '4') {
                return 'Visa';
            } else if (firstTwoDigits >= 51 && firstTwoDigits <= 55) {
                return 'MasterCard';
            } else if (firstTwoDigits === 34 || firstTwoDigits === 37) {
                return 'AmEx';
            } else if (firstTwoDigits === 60) {
                return 'Discover';
            } else {
                return 'Card';
            }
        }
        
        function getCardClass(cardType) {
            switch(cardType) {
                case 'Visa':
                    return 'card-visa';
                case 'MasterCard':
                    return 'card-mastercard';
                case 'AmEx':
                    return 'card-amex';
                case 'Discover':
                    return 'card-discover';
                default:
                    return 'card-generic';
            }
        }
        
        function getCardIcon(cardType) {
            switch(cardType) {
                case 'Visa':
                    return `<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" viewBox="0 0 24 24">
                        <path d="M23 5v14H1V5h22m0-2H1C0 3 0 4 0 4v16c0 0 0 1 1 1h22c1 0 1-1 1-1V4c0 0 0-1-1-1z"/>
                        <path d="M4 12h4v1H4z"/>
                    </svg>`;
                case 'MasterCard':
                    return `<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" viewBox="0 0 24 24">
                        <path d="M23 5v14H1V5h22m0-2H1C0 3 0 4 0 4v16c0 0 0 1 1 1h22c1 0 1-1 1-1V4c0 0 0-1-1-1z"/>
                        <circle cx="8" cy="12" r="3"/>
                        <circle cx="16" cy="12" r="3"/>
                    </svg>`;
                case 'AmEx':
                    return `<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" viewBox="0 0 24 24">
                        <path d="M23 5v14H1V5h22m0-2H1C0 3 0 4 0 4v16c0 0 0 1 1 1h22c1 0 1-1 1-1V4c0 0 0-1-1-1z"/>
                        <path d="M14 7v10h-4V7h4M4 7h4v2H4z"/>
                    </svg>`;
                case 'Discover':
                    return `<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" viewBox="0 0 24 24">
                        <path d="M23 5v14H1V5h22m0-2H1C0 3 0 4 0 4v16c0 0 0 1 1 1h22c1 0 1-1 1-1V4c0 0 0-1-1-1z"/>
                        <circle cx="12" cy="12" r="5"/>
                    </svg>`;
                default:
                    return `<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="white" viewBox="0 0 24 24">
                        <path d="M23 5v14H1V5h22m0-2H1C0 3 0 4 0 4v16c0 0 0 1 1 1h22c1 0 1-1 1-1V4c0 0 0-1-1-1z"/>
                        <path d="M4 9h16v2H4zm0 4h10v2H4z"/>
                    </svg>`;
            }
        }
        
        // Enhanced notification with animation
        function showEnhancedNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            const notificationMessage = document.getElementById('notification-message');
            
            notificationMessage.textContent = message;
            
            if (isError) {
                notification.classList.add('error-notification');
            } else {
                notification.classList.remove('error-notification');
            }
            
            // Apply slide-in from bottom animation
            notification.style.transform = 'translateY(100px)';
            notification.style.opacity = '0';
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
                notification.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(100px)';
                notification.style.opacity = '0';
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 300);
            }, 3000);
        }
        
        // Keep the same name as the original function
        window.showNotification = showEnhancedNotification;

        // ScrollReveal animation - similar to portfolio
        function initScrollReveal() {
            const sr = ScrollReveal({
                origin: 'top',
                distance: '60px',
                duration: 1000,
                delay: 200,
                reset: false
            });

            sr.reveal('.auth-container', {
                scale: 0.9
            });

            sr.reveal('.add-btn-container', {
                delay: 300
            });
        }

        // Add staggered entrance animations for cards
        function animateCardsStaggered() {
            const cards = document.querySelectorAll('.card-preview');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('active');
                }, 100 * index);
            });
        }

        // Initialize enhanced animations
        function initEnhancedAnimations() {
            // Initialize ScrollReveal if available
            if (typeof ScrollReveal !== 'undefined') {
                initScrollReveal();
            }
            
            // Replace standard notification with enhanced one
            window.showNotification = showEnhancedNotification;
        }
    </script>

    <!-- Enhanced animation script using self-executing function for better reliability -->
    <script type="text/babel">
        // Self-executing function to avoid timing issues
        (function() {
            try {
                console.log("Animation script running");
                
                // Enhanced animated title with rotation and blur effects
                const AnimatedTitle = ({ text }) => {
                    // Create an array of characters from the text
                    const characters = text.split('');
                    
                    return React.createElement(
                        'span',
                        { className: 'animated-title' },
                        characters.map((char, index) => 
                            React.createElement(
                                'span',
                                { 
                                    key: index,
                                    className: 'letter',
                                    style: {
                                        animationDelay: `${index * 0.07}s`
                                    }
                                },
                                char === ' ' ? '\u00A0' : char
                            )
                        )
                    );
                };

                // Shiny text animation for buttons with improved gradient
                const ShinyText = ({ text }) => {
                    return React.createElement(
                        'span',
                        { className: 'shiny-text' },
                        text
                    );
                };

                // Render the title
                const titleElement = document.getElementById('app-title');
                if (titleElement) {
                    console.log("Found title element, rendering animation");
                    ReactDOM.render(
                        React.createElement(AnimatedTitle, { text: "Card Manager" }),
                        titleElement
                    );
                } else {
                    console.error("Title element not found");
                }

                // Render the button text
                const buttonTextElement = document.getElementById('add-btn-text');
                if (buttonTextElement) {
                    console.log("Found button element, rendering animation");
                    ReactDOM.render(
                        React.createElement(ShinyText, { text: "Add Card" }),
                        buttonTextElement
                    );
                } else {
                    console.error("Button text element not found");
                }
            } catch (error) {
                console.error("Animation script error:", error);
                // Fallback in case of error
                const titleElement = document.getElementById('app-title');
                if (titleElement) titleElement.textContent = "Card Manager";
                
                const buttonTextElement = document.getElementById('add-btn-text');
                if (buttonTextElement) buttonTextElement.textContent = "Add Card";
            }
        })();
    </script>
</body>
</html>